# 第18周学习笔记

## 单元测试工具

已经对 Parser 进行了90%以上的单元测试，比较难覆盖的是 css 优先级的覆盖，可能需要准备比较多的测试用例

-------------|---------|----------|---------|---------|----------------------------
File         | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s          
-------------|---------|----------|---------|---------|----------------------------
All files    |   96.89 |    91.72 |     100 |    96.8 |                            
 computed.js |   93.64 |    88.41 |     100 |   93.27 | 68,104,137-138,166,168,170 
 parser.js   |     100 |    94.74 |     100 |     100 | 80,97-114                  
-------------|---------|----------|---------|---------|----------------------------

ToyBrowser 的单元测试就是要到 90% 也是比较容易，因为 ToyBrowser 是经过良好设计的代码，但是现实的项目却很难进行单元测试，原因是开发的方式出错了。

## TDD 测试驱动开发

尝试了对现有的项目增加单元测试的，但是发现有很多的文件，或者函数，压根没法进行单元测试，因为依赖的东西太多了。

依赖各种接口，各种后端来的数据，或者用户的点击，发现根本没法跑起来。

进行了一些测试知识了解，才发现是因为开发方式错了。

TDD Test-Driven Development，中文译作 测试驱动开发。

其实经过良好测试的代码，不应该无法测试，如果无法测试，一定是耦合过重，导致无法进行单一的函数，或者功能进行测试。

因此 TDD 的理念是，应该以代码能被测试的情况下来开发，类的组合，文件，模块，不是我们想分开就分开，而是，以是否能独立完成测试来衡量

所以反观如果代码很难写单元测试的话，问题并不是出在写测试代码的方式，而是代码的设计的根本上出了问题。

